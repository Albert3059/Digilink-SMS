(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(1972),a=e.i(47163);function i({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...i})}function r({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...i})}function s({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...i})}function n({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...i})}function l({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...i})}e.s(["Card",()=>i,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>r,"CardTitle",()=>s])},23750,70312,10708,e=>{"use strict";var t=e.i(1972),a=e.i(47163);function i({className:e,type:i,...r}){return(0,t.jsx)("input",{type:i,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>i],23750);var r=e.i(75305),s=e.i(23674),n=e.i(42937),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{let i=r.forwardRef((e,i)=>{let{asChild:r,...s}=e,l=r?n.Slot:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(l,{...s,ref:i})});return i.displayName=`Primitive.${a}`,{...e,[a]:i}},{});function d(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>l,"dispatchDiscreteCustomEvent",()=>d],70312);var c=r.forwardRef((e,a)=>(0,t.jsx)(l.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function o({className:e,...i}){return(0,t.jsx)(c,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...i})}c.displayName="Label",e.s(["Label",()=>o],10708)},10965,e=>{"use strict";var t=e.i(75305);let a=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:l="",children:d,iconNode:c,...o},u)=>(0,t.createElement)("svg",{ref:u,...i,width:r,height:r,stroke:e,strokeWidth:n?24*Number(s)/Number(r):s,className:a("lucide",l),...o},[...c.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(d)?d:[d]])),s=(e,i)=>{let s=(0,t.forwardRef)(({className:s,...n},l)=>(0,t.createElement)(r,{ref:l,iconNode:i,className:a(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...n}));return s.displayName=`${e}`,s};e.s(["default",()=>s],10965)},47134,e=>{"use strict";var t=e.i(1972),a=e.i(75305),i=e.i(30499),r=e.i(20755),s=e.i(67881),n=e.i(70065),l=e.i(23750),d=e.i(10708),c=e.i(84762),o=e.i(62870);function u({subscription:e}){let u=(0,i.useRouter)(),[p,m]=(0,a.useState)(!1),[h,x]=(0,a.useState)(null),[g,b]=(0,a.useState)({client_name:e.client_name,client_email:e.client_email,subscription_type:e.subscription_type,start_date:e.start_date,end_date:e.end_date,renewal_date:e.renewal_date||"",price:e.price||"",notes:e.notes||"",status:e.status}),v=(e,t)=>{let a=e.target,i=t||a.name,r=a.value;b(e=>({...e,[i]:r}))},f=async t=>{t.preventDefault();let a=(0,r.createClient)();m(!0),x(null);try{let{error:t}=await a.from("subscriptions").update({client_name:g.client_name,client_email:g.client_email,subscription_type:g.subscription_type,start_date:g.start_date,end_date:g.end_date,renewal_date:g.renewal_date||null,price:g.price?Number.parseFloat(g.price):null,notes:g.notes||null,status:g.status,updated_at:new Date().toISOString()}).eq("id",e.id);if(t)throw t;u.push("/subscriptions")}catch(e){x(e instanceof Error?e.message:"An error occurred")}finally{m(!1)}};return(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Edit Subscription"})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"client_name",children:"Client Name *"}),(0,t.jsx)(l.Input,{id:"client_name",name:"client_name",required:!0,value:g.client_name,onChange:v})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"client_email",children:"Client Email *"}),(0,t.jsx)(l.Input,{id:"client_email",name:"client_email",type:"email",required:!0,value:g.client_email,onChange:v})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"subscription_type",children:"Subscription Type *"}),(0,t.jsx)(l.Input,{id:"subscription_type",name:"subscription_type",required:!0,value:g.subscription_type,onChange:v})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"status",children:"Status *"}),(0,t.jsxs)(o.Select,{value:g.status,onValueChange:e=>{b(t=>({...t,status:e}))},children:[(0,t.jsx)(o.SelectTrigger,{id:"status",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(o.SelectItem,{value:"expired",children:"Expired"}),(0,t.jsx)(o.SelectItem,{value:"cancelled",children:"Cancelled"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"start_date",children:"Start Date *"}),(0,t.jsx)(l.Input,{id:"start_date",name:"start_date",type:"date",required:!0,value:g.start_date,onChange:v})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"end_date",children:"End Date *"}),(0,t.jsx)(l.Input,{id:"end_date",name:"end_date",type:"date",required:!0,value:g.end_date,onChange:v})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"renewal_date",children:"Renewal Date (Optional)"}),(0,t.jsx)(l.Input,{id:"renewal_date",name:"renewal_date",type:"date",value:g.renewal_date,onChange:v})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"price",children:"Price (Optional)"}),(0,t.jsx)(l.Input,{id:"price",name:"price",type:"number",step:"0.01",value:g.price,onChange:v})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"notes",children:"Notes (Optional)"}),(0,t.jsx)(c.Textarea,{id:"notes",name:"notes",value:g.notes,onChange:v})]}),h&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:h}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(s.Button,{type:"submit",disabled:p,children:p?"Saving...":"Save Changes"}),(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>u.back(),children:"Cancel"})]})]})})]})}function p(){let e=(0,i.useRouter)(),s=(0,i.useParams)(),[n,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0),[o,p]=(0,a.useState)(null);return((0,a.useEffect)(()=>{!async function(){try{let t=(0,r.createClient)(),{data:a,error:i}=await t.from("subscriptions").select("*").eq("id",s.id).single();if(i)throw i;if(!a)return void e.push("/subscriptions");l(a)}catch(e){console.log("[v0] Error fetching subscription:",e),p("Failed to load subscription")}finally{c(!1)}}()},[s.id,e]),d)?(0,t.jsx)("div",{className:"min-h-svh bg-background",children:(0,t.jsx)("div",{className:"container py-8",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})})}):o||!n?(0,t.jsx)("div",{className:"min-h-svh bg-background",children:(0,t.jsx)("div",{className:"container py-8",children:(0,t.jsx)("p",{className:"text-red-500",children:o||"Subscription not found"})})}):(0,t.jsx)("div",{className:"min-h-svh bg-background",children:(0,t.jsx)("main",{className:"container py-8",children:(0,t.jsxs)("div",{className:"max-w-2xl",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Edit Subscription"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-8",children:"Update subscription details"}),(0,t.jsx)(u,{subscription:n})]})})})}e.s(["default",()=>p],47134)}]);